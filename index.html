<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>TU DUBLIN Travel Modal</title>
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <style>
        .triangle {
            stroke: #000;
            stroke-width: 1;
            fill: none;
        }

        .user-point {
            fill: #f00;
            stroke: #000;
            stroke-width: 1;
        }
    </style>
</head>
<body>

<div>
    <label for="walkingSlider">Walking (%): </label>
    <input type="range" id="walkingSlider" name="walking" class="slider" min="0" max="100" value="33">
    <span id="walkingValue">33</span>%
</div>
<div>
    <label for="publicTransportSlider">Public Transport (%): </label>
    <input type="range" id="publicTransportSlider" name="publicTransport" class="slider" min="0" max="100" value="33">
    <span id="publicTransportValue">33</span>%
</div>
<div>
    <label for="privateCarsSlider">Private Cars (%): </label>
    <input type="range" id="privateCarsSlider" name="privateCars" class="slider" min="0" max="100" value="34">
    <span id="privateCarsValue">34</span>%
</div>

<div id="trianglePlot"></div>

<script>
    const width = 600, height = 600;
    const margin = { top: 30, right: 30, bottom: 30, left: 30 };

    const svg = d3.select('#trianglePlot').append('svg')
        .attr('width', width)
        .attr('height', height)
        .append('g')
        .attr('transform', `translate(${margin.left},${margin.top})`);

    // Define the points of the triangle
    const points = [[0, height], [width / 2, 0], [width, height]];

    // Draw the triangle
    svg.append('path')
        .attr('class', 'triangle')
        .attr('d', `M ${points.join('L ')} Z`);

    // Initial position of the user point
    const initialPoint = calculatePointPosition({ walking: 33, publicTransport: 33, privateCars: 34 });

    // User point element
    const userPoint = svg.append('circle')
        .attr('class', 'user-point')
        .attr('r', 5)
        .attr('cx', initialPoint.x)
        .attr('cy', initialPoint.y);

    // Function to calculate point position based on slider values
    function calculatePointPosition(data) {
        // Barycentric coordinates based on slider values
        const total = data.walking + data.publicTransport + data.privateCars;
        const walkingFactor = data.walking / total;
        const publicTransportFactor = data.publicTransport / total;
        const privateCarsFactor = data.privateCars / total;

        // Calculate position
        const x = points[0][0] * walkingFactor + points[1][0] * publicTransportFactor + points[2][0] * privateCarsFactor;
        const y = points[0][1] * walkingFactor + points[1][1] * publicTransportFactor + points[2][1] * privateCarsFactor;

        return { x, y };
    }

    // Update function for sliders
    function updatePosition() {
        const data = {
            walking: parseFloat(d3.select('#walkingSlider').property('value')),
            publicTransport: parseFloat(d3.select('#publicTransportSlider').property('value')),
            privateCars: parseFloat(d3.select('#privateCarsSlider').property('value'))
        };

        const pointPosition = calculatePointPosition(data);
        userPoint
            .attr('cx', pointPosition.x)
            .attr('cy', pointPosition.y);

        // Update slider values
        d3.select('#walkingValue').text(data.walking.toFixed(0));
        d3.select('#publicTransportValue').text(data.publicTransport.toFixed(0));
        d3.select('#privateCarsValue').text(data.privateCars.toFixed(0));
    }

    // Initialize sliders with the event listener
    d3.selectAll('.slider').on('input', updatePosition);

    // Initial update for the position
    updatePosition();

</script>
</body>
</html>

       
