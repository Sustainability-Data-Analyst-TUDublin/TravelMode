<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Interactive Radar Chart</title>
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <style>
        .radar-area {
            fill: steelblue;
            fill-opacity: 0.5;
            stroke: steelblue;
            stroke-width: 2;
        }
    </style>
</head>
<body>
    <div>
        <label for="walkingSlider">Walking (%): </label>
        <input type="range" id="walkingSlider" class="slider" min="0" max="100" value="33">
        <span id="walkingValue">33</span>%
    </div>
    <div>
        <label for="publicTransportSlider">Public Transport (%): </label>
        <input type="range" id="publicTransportSlider" class="slider" min="0" max="100" value="33">
        <span id="publicTransportValue">33</span>%
    </div>
    <div>
        <label for="privateCarsSlider">Private Cars (%): </label>
        <input type="range" id="privateCarsSlider" class="slider" min="0" max="100" value="34">
        <span id="privateCarsValue">34</span>%
    </div>

    <div id="radarChart"></div>

    <script>
        let data = {
            'Walking': 33,
            'PublicTransport': 33,
            'PrivateCars': 34
        };

        function updateVisualization(data) {
            // The function to draw and update the radar chart.
            // It should be called every time the data changes.

            // Clear the existing chart
            d3.select("#radarChart").selectAll("*").remove();

            // Set the dimensions of the chart
            const width = 600,
                  height = 600,
                  margin = { top: 100, right: 100, bottom: 100, left: 100 };

            // Calculate the radius of the chart
            const radius = Math.min(width / 2, height / 2) - Math.max(margin.top, margin.right, margin.bottom, margin.left);

            // The scale for the distance from the center of the chart
            const rScale = d3.scaleLinear()
                             .range([0, radius])
                             .domain([0, 100]); // Assuming the data values are percentages

            // Create an SVG for the radar chart
            const svg = d3.select("#radarChart").append("svg")
                          .attr("width", width)
                          .attr("height", height)
                          .append("g")
                          .attr("transform", "translate(" + (width / 2) + "," + (height / 2) + ")");

            // Convert the data to points on the radar chart
            const points = [];
            const angleSlice = Math.PI * 2 / Object.keys(data).length;
            Object.keys(data).forEach((key, i) => {
                const angle = angleSlice * i;
                points.push([
                    rScale(data[key]) * Math.cos(angle - Math.PI / 2),
                    rScale(data[key]) * Math.sin(angle - Math.PI / 2)
                ]);
            });

            // Close the path by adding the first point at the end
            points.push(points[0]);

            // Draw the path for the radar chart
            const line = d3.line();
            svg.append("path")
                .datum(points)
                .attr("class", "radar-area")
                .attr("d", line)
                .style("fill", "steelblue")
                .style("fill-opacity", 0.5)
                .style("stroke", "steelblue")
                .style("stroke-width", 2);
        }

        // Attach event listeners to sliders
        d3.selectAll(".slider").on("input", function() {
            // Get the new value from the slider
            const newPercentage = +this.value;
            const mode = this.id.split('Slider')[0];
            data[mode] = newPercentage;

            // Update the display of the percentage
            d3.select(`#${mode}Value`).text(newPercentage);

            // Update the radar chart with the new data
            updateVisualization(data);
        });

        // Draw the initial radar chart
        updateVisualization(data);
    
        // Function to update the sliders text
        function updateSliders() {
            document.getElementById('walkingValue').textContent = data.Walking;
            document.getElementById('publicTransportValue').textContent = data.PublicTransport;
            document.getElementById('privateCarsValue').textContent = data.PrivateCars;
        }
    
        // Set the initial slider values
        updateSliders();
    
    </script>
    </body>
    </html>
